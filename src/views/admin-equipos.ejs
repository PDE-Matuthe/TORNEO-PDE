<%- include('partials/head') %>

<div class="flex min-h-screen bg-slate-950 font-sans text-slate-300">
    
    <%- include('partials/admin-sidebar', { active: 'equipos' }) %>

    <main class="flex-1 ml-64 p-8 relative overflow-y-auto min-h-screen">
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-4xl font-bold mb-2 text-white">
        <i class="fas fa-shield-alt text-yellow-500 mr-3"></i> Equipos
      </h1>
      <p class="text-slate-400">Directorio de organizaciones participantes</p>
    </div>
    <a href="/admin/equipos/crear" class="bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-6 rounded-full transition shadow-lg shadow-green-900/20">
      <i class="fas fa-plus mr-2"></i> Nuevo Equipo
    </a>
  </div>

  <% if (typeof equipos !== 'undefined' && equipos && equipos.length > 0) { %>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      <% equipos.forEach(equipo => { %>
        <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-yellow-500/50 transition group shadow-lg flex flex-col items-center text-center relative overflow-hidden">
          
          <div class="absolute inset-0 bg-gradient-to-b from-slate-800 to-slate-900 z-0"></div>
          
          <div class="relative z-10 w-full flex flex-col items-center h-full">
            <div class="w-24 h-24 bg-slate-900 rounded-full flex items-center justify-center mb-4 border-2 border-slate-700 group-hover:border-yellow-500 transition shadow-inner p-4">
              <% if (equipo.logo_url) { %>
                <img src="<%= equipo.logo_url %>" alt="<%= equipo.nombre %>" class="w-full h-full object-contain drop-shadow-lg">
              <% } else { %>
                <i class="fas fa-shield-alt text-3xl text-slate-600"></i>
              <% } %>
            </div>

            <h3 class="text-xl font-bold text-white mb-1"><%= equipo.nombre %></h3>
            <span class="text-xs font-mono text-yellow-500 bg-slate-900 px-2 py-1 rounded border border-slate-700 mb-4">
              <%= equipo.siglas %>
            </span>

            <div class="flex-grow"></div> <div class="flex gap-2 w-full mt-4 pt-4 border-t border-slate-700/50">
              <a href="/admin/equipos/<%= equipo.id %>/editar" class="flex-1 bg-slate-700 hover:bg-blue-600 text-slate-300 hover:text-white py-2 rounded text-sm font-bold transition">
                <i class="fas fa-edit"></i>
              </a>
              <form action="/admin/equipos/<%= equipo.id %>/delete" method="POST" class="flex-1">
                <button type="submit" class="w-full bg-slate-700 hover:bg-red-600 text-slate-300 hover:text-white py-2 rounded text-sm font-bold transition" onclick="return confirm('Â¿Eliminar <%= equipo.nombre %>?')">
                  <i class="fas fa-trash"></i>
                </button>
              </form>
            </div>
          </div>

        </div>
      <% }); %>
    </div>
  <% } else { %>
    <div class="text-center py-20 bg-slate-800 rounded-xl border border-slate-700 border-dashed">
      <i class="fas fa-shield-alt text-6xl text-slate-700 mb-4"></i>
      <h2 class="text-2xl font-bold text-slate-400">Sin Equipos</h2>
      <p class="text-slate-500 mb-6">No hay equipos registrados en la base de datos.</p>
      <a href="/admin/equipos/crear" class="bg-yellow-600 hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded transition">
        Crear Primero
      </a>
    </div>
  <% } %>

    </main>

</div>
</main>

<%- include('partials/footer') %>