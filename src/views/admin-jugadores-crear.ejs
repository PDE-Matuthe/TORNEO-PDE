<%- include('partials/head') %>

<div class="flex min-h-screen bg-slate-950 font-sans text-slate-300">
    
    <%- include('partials/admin-sidebar', { active: 'jugadores' }) %>

    <main class="flex-1 ml-64 p-8 relative overflow-y-auto min-h-screen">
  
  <div class="bg-slate-800 rounded-2xl shadow-2xl border border-slate-700 overflow-hidden">
    <div class="bg-slate-900 px-8 py-6 border-b border-slate-700 flex items-center gap-4">
      <div class="w-12 h-12 bg-green-600/20 rounded-full flex items-center justify-center border border-green-500/30 text-green-500">
        <i class="fas fa-user-plus text-xl"></i>
      </div>
      <div>
        <h1 class="text-2xl font-bold text-white">Registrar Jugador</h1>
        <p class="text-slate-400 text-sm">Nuevo miembro del ecosistema</p>
      </div>
    </div>

    <form action="/admin/jugadores" method="POST" class="p-8 space-y-6">
      
      <div>
        <label class="block text-slate-300 text-xs font-bold mb-2 uppercase tracking-wide">Nombre de Invocador</label>
        <div class="relative">
          <span class="absolute left-4 top-3.5 text-slate-500"><i class="fas fa-gamepad"></i></span>
          <input type="text" name="nombre_invocador" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 pl-10 text-white focus:outline-none focus:border-green-500 transition" placeholder="Ej: Faker" required>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        
        <div>
          <label class="block text-slate-300 text-xs font-bold mb-2 uppercase tracking-wide">Estado en el Equipo</label>
          <select name="tipo_rol" id="tipoRolSelect" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white focus:outline-none focus:border-green-500 transition">
            <option value="TITULAR" selected>‚≠ê Titular</option>
            <option value="SUPLENTE">üîÑ Suplente</option>
            <option value="COACH">üß† Coach</option>
            <option value="STAFF">üìã Staff</option>
          </select>
        </div>

        <div>
          <label class="block text-slate-300 text-xs font-bold mb-2 uppercase tracking-wide">Posici√≥n (Solo Jugadores)</label>
          <select name="rol_juego" id="rolJuegoSelect" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white focus:outline-none focus:border-green-500 transition">
            <option value="TOP">TOP</option>
            <option value="JUNGLE">JUNGLE</option>
            <option value="MID">MID</option>
            <option value="ADC">ADC</option>
            <option value="SUPPORT">SUPPORT</option>
            <option value="">-- Sin Posici√≥n --</option>
          </select>
        </div>

      </div>

      <div>
        <label class="block text-slate-300 text-xs font-bold mb-2 uppercase tracking-wide">Equipo (Opcional)</label>
        <select name="equipo_id" class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-white focus:outline-none focus:border-green-500 transition">
          <option value="">-- Agente Libre --</option>
          <% if (locals.equipos) { equipos.forEach(eq => { %>
            <option value="<%= eq.id %>"><%= eq.nombre %></option>
          <% }) } %>
        </select>
      </div>

      <div class="flex justify-end gap-4 pt-6 border-t border-slate-700">
        <a href="/admin/jugadores" class="text-slate-400 font-bold px-4 py-3">Cancelar</a>
        <button type="submit" class="bg-green-600 hover:bg-green-500 text-white font-bold py-3 px-8 rounded-lg shadow-lg">Guardar</button>
      </div>
    </form>
  </div>
    </main>

</div>

<script>
  const tipoSelect = document.getElementById('tipoRolSelect');
  const rolSelect = document.getElementById('rolJuegoSelect');

  tipoSelect.addEventListener('change', () => {
    if (tipoSelect.value === 'COACH' || tipoSelect.value === 'STAFF') {
      rolSelect.value = ""; // Poner en "Sin Posici√≥n"
      rolSelect.disabled = true; // Deshabilitar
    } else {
      rolSelect.disabled = false; // Habilitar
      if(rolSelect.value === "") rolSelect.value = "MID"; // Default si estaba vac√≠o
    }
  });
</script>

<%- include('partials/footer') %>