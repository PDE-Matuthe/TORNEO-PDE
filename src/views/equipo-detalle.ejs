<%- include('partials/head') %>
<%- include('partials/nav') %>

<main class="min-h-screen bg-slate-900 bg-[url('https://lolstatic-a.akamaihd.net/frontpage/apps/prod/harbinger-l10-website/es-mx/production/es-mx/static/hero-0632cbf2872c5cc0dffa93d2ae8a29e8.jpg')] bg-fixed bg-cover bg-center">
  <div class="min-h-screen bg-slate-900/90 backdrop-blur-sm py-12 px-4">
    
    <div class="max-w-7xl mx-auto space-y-16">

      <div class="relative bg-slate-800/50 border border-slate-700 rounded-3xl p-8 md:p-12 flex flex-col md:flex-row items-center gap-8 shadow-2xl overflow-hidden group">
        
        <div class="absolute top-0 right-0 w-96 h-96 bg-yellow-500/10 rounded-full blur-[100px] -translate-y-1/2 translate-x-1/3 group-hover:bg-yellow-500/20 transition duration-1000"></div>

        <div class="relative z-10 w-40 h-40 md:w-56 md:h-56 flex-shrink-0 drop-shadow-[0_0_25px_rgba(255,255,255,0.1)] transition transform group-hover:scale-105 duration-500">
          <img src="<%= equipo.logo_url || 'https://via.placeholder.com/200' %>" alt="<%= equipo.nombre %>" class="w-full h-full object-contain">
        </div>

        <div class="relative z-10 text-center md:text-left flex-grow">
          <h1 class="text-5xl md:text-7xl font-black text-white uppercase italic tracking-tighter mb-2">
            <%= equipo.nombre %>
          </h1>
          <div class="flex items-center justify-center md:justify-start gap-4">
            <span class="px-4 py-1 bg-yellow-500 text-black font-bold text-xl rounded skew-x-[-10deg] shadow-lg shadow-yellow-500/20">
              <%= equipo.siglas %>
            </span>
            <span class="text-slate-400 font-bold tracking-widest uppercase text-sm">Temporada 2026</span>
          </div>
        </div>

        <a href="/equipos" class="absolute top-6 right-6 text-slate-500 hover:text-white transition z-20">
          <i class="fas fa-times text-2xl"></i>
        </a>
      </div>

      <% 
        const titulares = jugadores.filter(j => j.tipo_rol === 'TITULAR');
        const suplentes = jugadores.filter(j => j.tipo_rol === 'SUPLENTE');
        const staff = jugadores.filter(j => ['COACH', 'STAFF'].includes(j.tipo_rol));
        
        // Función helper para colores de rol
        function getRoleColor(rol) {
           if(rol === 'TOP') return 'text-red-500 border-red-500/50 shadow-red-900/20';
           if(rol === 'JUNGLE') return 'text-green-500 border-green-500/50 shadow-green-900/20';
           if(rol === 'MID') return 'text-purple-500 border-purple-500/50 shadow-purple-900/20';
           if(rol === 'ADC') return 'text-blue-500 border-blue-500/50 shadow-blue-900/20';
           if(rol === 'SUPPORT') return 'text-yellow-500 border-yellow-500/50 shadow-yellow-900/20';
           return 'text-slate-400 border-slate-500/50';
        }

        // Helper iconos
        function getRoleIcon(rol) {
           return rol ? rol.substring(0,1) : '?';
        }
      %>

      <% if (titulares.length > 0) { %>
        <section>
          <div class="flex items-center gap-4 mb-8">
            <div class="h-10 w-1 bg-yellow-500 shadow-[0_0_10px_orange]"></div>
            <h2 class="text-3xl font-black text-white uppercase italic tracking-wide">Alineación Titular</h2>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
            <% titulares.forEach(p => { 
               const colorClass = getRoleColor(p.rol_juego);
            %>
              <a href="/jugador/<%= p.id %>" class="group relative bg-slate-800 rounded-xl border border-slate-700 overflow-hidden hover:-translate-y-2 transition duration-300 shadow-xl hover:shadow-2xl block cursor-pointer">
                
                <div class="absolute inset-0 opacity-0 group-hover:opacity-10 bg-gradient-to-b from-transparent to-white transition duration-500"></div>

                <div class="bg-slate-900/80 p-4 flex justify-between items-center border-b border-slate-700">
                  <span class="<%= colorClass.split(' ')[0] %> font-bold text-xs tracking-widest"><%= p.rol_juego %></span>
                  <i class="fas fa-chart-bar text-slate-600 group-hover:text-yellow-500 transition"></i>
                </div>

                <div class="p-6 flex flex-col items-center justify-center gap-4 relative">
                  
                  <div class="w-20 h-20 rounded-full flex items-center justify-center bg-slate-900 border-2 <%= colorClass %> shadow-lg group-hover:scale-110 transition duration-500">
                    <span class="text-2xl font-black <%= colorClass.split(' ')[0] %>"><%= getRoleIcon(p.rol_juego) %></span>
                  </div>

                  <div class="text-center z-10">
                    <h3 class="text-xl font-bold text-white group-hover:text-yellow-400 transition"><%= p.nombre_invocador %></h3>
                    <p class="text-slate-500 text-xs font-mono mt-1">TITULAR</p>
                  </div>

                </div>
                
                <div class="h-1 w-full bg-gradient-to-r from-transparent via-yellow-500 to-transparent opacity-50 group-hover:opacity-100 transition"></div>
              </a>
            <% }) %>
          </div>
        </section>
      <% } %>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
        
        <% if (suplentes.length > 0) { %>
          <section class="lg:col-span-2">
            <h3 class="text-xl font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-700 pb-2">
              <i class="fas fa-sync-alt mr-2"></i> Reservas
            </h3>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <% suplentes.forEach(p => { %>
                <a href="/jugador/<%= p.id %>" class="flex items-center gap-4 bg-slate-800/50 p-4 rounded-lg border border-slate-700 hover:bg-slate-800 transition hover:border-slate-500 group">
                  <div class="w-12 h-12 bg-slate-900 rounded flex items-center justify-center font-bold text-slate-500 border border-slate-700 group-hover:border-slate-500">
                    <%= getRoleIcon(p.rol_juego) %>
                  </div>
                  <div>
                    <h4 class="text-white font-bold text-lg group-hover:text-yellow-400 transition"><%= p.nombre_invocador %></h4>
                    <span class="text-xs text-yellow-600 font-bold uppercase"><%= p.rol_juego || 'FLEX' %></span>
                  </div>
                  <i class="fas fa-chevron-right ml-auto text-slate-600 group-hover:text-white transition opacity-0 group-hover:opacity-100"></i>
                </a>
              <% }) %>
            </div>
          </section>
        <% } %>

        <% if (staff.length > 0) { %>
          <section class="lg:col-span-1">
            <h3 class="text-xl font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-700 pb-2">
              <i class="fas fa-chess-king mr-2"></i> Coaching Staff
            </h3>
            
            <div class="space-y-4">
              <% staff.forEach(p => { %>
                <div class="bg-gradient-to-r from-purple-900/20 to-slate-800 border border-purple-500/30 p-4 rounded-lg flex items-center justify-between">
                  <div>
                    <h4 class="text-white font-bold"><%= p.nombre_invocador %></h4>
                    <span class="text-xs text-purple-400 font-bold tracking-widest"><%= p.tipo_rol %></span>
                  </div>
                  <i class="fas fa-brain text-purple-500/50 text-2xl"></i>
                </div>
              <% }) %>
            </div>
          </section>
        <% } %>

      </div>
      
      <% if (jugadores.length === 0) { %>
        <div class="text-center py-20 opacity-50">
          <i class="fas fa-user-secret text-6xl text-slate-600 mb-4"></i>
          <h2 class="text-2xl font-bold text-slate-400">Información Clasificada</h2>
          <p class="text-slate-500">El roster de este equipo aún no ha sido revelado.</p>
        </div>
      <% } %>

    </div>
  </div>
</main>

<%- include('partials/footer') %>