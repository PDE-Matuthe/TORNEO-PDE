<%- include('partials/head') %>
<%- include('partials/nav') %>

<main class="max-w-7xl mx-auto px-4 py-8">
  <!-- Header -->
  <div class="mb-8">
    <h1 class="text-4xl font-bold mb-2">
      <i class="fas fa-shield-alt text-gold mr-3"></i>Detalles del Equipo
    </h1>
    <p class="text-slate-400">Información completa del equipo y jugadores</p>
  </div>

  <% if (typeof equipo !== 'undefined' && equipo) { %>
    <!-- Equipo Header -->
    <div class="bg-slate-800 rounded-lg p-6 border border-slate-700 mb-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Logo -->
        <div class="text-center">
          <% if (equipo.logo_url) { %>
            <img src="<%= equipo.logo_url %>" alt="<%= equipo.nombre %>" class="h-32 w-32 object-contain mx-auto mb-3">
          <% } else { %>
            <div class="h-32 w-32 flex items-center justify-center bg-slate-700 rounded mx-auto mb-3">
              <i class="fas fa-shield-alt text-4xl text-slate-500"></i>
            </div>
          <% } %>
        </div>

        <!-- Info -->
        <div class="md:col-span-2">
          <h2 class="text-3xl font-bold text-white mb-2"><%= equipo.nombre %></h2>
          
          <div class="space-y-2 text-slate-300">
            <% if (equipo.region) { %>
              <div class="flex items-center gap-2">
                <i class="fas fa-globe text-gold"></i>
                <span>Región: <strong><%= equipo.region %></strong></span>
              </div>
            <% } %>
            
            <% if (equipo.email) { %>
              <div class="flex items-center gap-2">
                <i class="fas fa-envelope text-gold"></i>
                <a href="mailto:<%= equipo.email %>" class="text-blue-400 hover:text-blue-300"><%= equipo.email %></a>
              </div>
            <% } %>
          </div>

          <% if (equipo.descripcion) { %>
            <div class="mt-4 pt-4 border-t border-slate-600">
              <p class="text-slate-400"><%= equipo.descripcion %></p>
            </div>
          <% } %>
        </div>
      </div>
    </div>

    <!-- Jugadores (Roster) -->
    <div class="mb-8">
      <h3 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">
        <i class="fas fa-users text-gold mr-2"></i>Roster del Equipo
      </h3>

      <% if (typeof jugadores !== 'undefined' && jugadores && jugadores.length > 0) { %>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          <% jugadores.forEach(jugador => { %>
            <div class="bg-slate-800 rounded-lg p-4 border border-slate-700 hover:border-gold transition">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center">
                  <i class="fas fa-user text-slate-400"></i>
                </div>
                <div class="flex-1">
                  <h4 class="font-bold text-white">
                    <a href="/jugador/<%= jugador.id %>" class="hover:text-gold transition">
                      <%= jugador.nombre_invocador %>
                    </a>
                  </h4>
                  <p class="text-xs text-slate-400"><%= jugador.rol_juego %></p>
                </div>
              </div>
              
              <div class="bg-slate-700/50 rounded px-3 py-1 text-center text-xs text-slate-300">
                <i class="fas fa-gamepad mr-1"></i><%= jugador.rol_juego.toUpperCase() %>
              </div>
            </div>
          <% }); %>
        </div>
      <% } else { %>
        <div class="bg-slate-800 rounded-lg p-8 text-center border border-slate-700">
          <p class="text-slate-400">No hay jugadores en este equipo aún</p>
        </div>
      <% } %>
    </div>

    <!-- Partidas Recientes -->
    <div class="mb-8">
      <h3 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">
        <i class="fas fa-history text-gold mr-2"></i>Partidas Recientes
      </h3>

      <% if (typeof partidas !== 'undefined' && partidas && partidas.length > 0) { %>
        <div class="space-y-3">
          <% partidas.slice(0, 10).forEach(partida => { %>
            <div class="bg-slate-800 rounded-lg p-4 border border-slate-700 hover:border-gold transition">
              <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-4 flex-1 w-full md:w-auto">
                  <!-- Equipo Azul -->
                  <div class="text-center flex-1">
                    <img src="<%= partida.azul_logo %>" alt="<%= partida.azul_nombre %>" class="h-8 w-8 object-contain mx-auto mb-1">
                    <p class="text-sm font-bold text-white"><%= partida.azul_nombre %></p>
                  </div>

                  <!-- Resultado -->
                  <div class="px-3 py-1 bg-slate-900 rounded text-center">
                    <% if (partida.ganador_id) { %>
                      <p class="font-bold text-gold"><%= partida.azul_kills %>-<%= partida.rojo_kills %></p>
                    <% } else { %>
                      <p class="text-slate-400 font-bold">VS</p>
                    <% } %>
                  </div>

                  <!-- Equipo Rojo -->
                  <div class="text-center flex-1">
                    <img src="<%= partida.rojo_logo %>" alt="<%= partida.rojo_nombre %>" class="h-8 w-8 object-contain mx-auto mb-1">
                    <p class="text-sm font-bold text-white"><%= partida.rojo_nombre %></p>
                  </div>
                </div>

                <div class="flex items-center gap-3 text-sm">
                  <div class="text-right">
                    <p class="text-xs text-slate-400"><%= partida.fase_torneo %></p>
                    <p class="text-xs text-slate-500"><%= new Date(partida.fecha_partida).toLocaleDateString('es-ES', { month: '2-digit', day: '2-digit' }) %></p>
                  </div>
                  <a href="/partida/<%= partida.id %>" class="px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white rounded text-xs transition">
                    Ver
                  </a>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
      <% } else { %>
        <div class="bg-slate-800 rounded-lg p-8 text-center border border-slate-700">
          <p class="text-slate-400">No hay partidas registradas para este equipo</p>
        </div>
      <% } %>
    </div>

    <!-- Back Button -->
    <div class="mt-8">
      <a href="/equipos" class="inline-flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded transition">
        <i class="fas fa-arrow-left"></i> Volver a Equipos
      </a>
    </div>

  <% } else { %>
    <div class="bg-slate-800 rounded-lg p-8 text-center border border-slate-700">
      <i class="fas fa-exclamation-circle text-red-400 text-4xl mb-3"></i>
      <p class="text-red-400">Equipo no encontrado</p>
    </div>
  <% } %>
</main>

<%- include('partials/footer') %>
